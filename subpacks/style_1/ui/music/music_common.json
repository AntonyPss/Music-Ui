{
  "namespace": "music_common",

  "label_common": {
    "type": "label",
    "layer": 2,
    "size": [ "default", 10 ]
  },

  "back_button_common": {
    "type": "panel",
    "$texture_color|default": [ 1.0, 1.0, 1.0 ],
    "size": [ "100%", "100%" ],
    "controls": [
      {
        "background": {
          "type": "image",
          "texture": "textures/ui/icons/arrow_back_bg",
          "ignored": "(not $bg_visible)",
          "layer": 2,
          "size": [ "100%", "100%" ]
        }
      },
      {
        "icon": {
          "type": "image",
          "texture": "textures/ui/icons/arrow_back",
          "layer": 4,
          "color": "$texture_color",
          "size": [ 8, 14 ]
        }
      }
    ]
  },

  "back_button_panel": {
    "type": "panel",
    "anchor_from": "top_left",
    "anchor_to": "top_left",
    "size": [ 18, 18 ],
    "offset": [ 0.5, 0.5 ],
    "controls": [
      {
        "back_button@common.button": {
          "$button_panel": "music_common.back_button_common",
          "$pressed_button_name": "button.menu_exit",
          "size": [ "100% - 1px", "100% - 1px"  ],
          "controls": [
            {
              "default@$button_panel": {
                "$bg_visible": false
              }
            },
            {
              "hover@$button_panel": {
                "$bg_visible": true,
                "$texture_color": [ 0.1, 0.1, 0.1 ]
              }
            },
            {
              "pressed@$button_panel": {
                "$bg_visible": true,
                "$texture_color": [ 0.2, 0.2, 0.2 ]
              }
            }
          ]
        }
      }
    ]
  },

  "tip_button_panel": {
    "type": "stack_panel",
    "orientation": "horizontal",
    "controls": [
      {
        "tip_icon_panel": {
          "type": "panel",
          "size": [ "100%c", "100%" ],
          "controls": [
            {
              "tip_icon": {
                "type": "image",
                "texture": "textures/ui/icons/tip_icon",
                "layer": 4,
                "color": [ 0.1, 0.1, 0.1 ],
                "size": [ 12, 12 ]
              }
            }
          ]
        }
      },
      {
        "padding": {
          "type": "panel",
          "size": [ 2, 0 ]
        }
      },
      {
        "tip_label_panel": {
          "type": "panel",
          "size": [ "100%c", "100%" ],
          "controls": [
            {
              "tip_label": {
                "type": "label",
                "text": "music.screen.tip",
                "text_alignment": "center",
                "anchor_from": "center",
                "anchor_to": "center",
                "layer": 4,
                "color": [ 0.1, 0.1, 0.1 ],
                "size": [ "default", 10 ]
              }
            }
          ]
        }
      }
    ]
  },

  "tip_button_toggle@common_toggles.light_content_toggle": {
    "$toggle_name": "tip_modal_toggle",
    "layer": 4,
    "size": [ "100%", "100%" ]
  },

  "section_divider_panel": {
    "type": "stack_panel",
    "orientation": "horizontal",
    "size": [ "100%", "100%cm + 8px" ]
  },

  "section_divider_padding": {
    "type": "panel",
    "size": [ 4, 0 ]
  },

  "top_bar_image": {
    "type": "panel",
    "layer": 2,
    "controls": [
      { "back_button@back_button_panel": {} },
      {
        "top_bar_stack": {
          "type": "stack_panel",
          "orientation": "horizontal",
          "size": [ "100%", "100%" ],
          "controls": [
            {
              "top_bar_image_left": {
                "type": "image",
                "texture": "textures/ui/top_bar",
                "layer": 2,
                "size": [ "fill", "100%" ]
              }
            },
            {
              "top_bar_image_divider": {
                "type": "image",
                "texture": "textures/ui/top_bar_divider",
                "layer": 2,
                "size": [ "100%c", "100%" ],
                "controls": [
                  {
                    "tip_button@music_common.tip_button_toggle": {
                      "$toggle_group_forced_index": 0,
                      "$default_texture_alpha": 0.0,
                      "$default_checked_texture_alpha": 0.0,
                      "$hover_texture_alpha": 0.0,
                      "$hover_checked_texture_alpha": 0.0,
                      "$default_border_visible": false,
                      "$hover_border_visible": false,
                      "$toggle_view_binding_name": "show_tip_modal",
                      "$button_content": "music_common.tip_button_panel",
                      "size": [ 48, 12 ],
                      "offset": [ 0, -1 ]
                    }
                  }
                ]
              }
            }
          ]
        }
      },
      { "title_header_panel@title_header_panel": {} }
    ]
  },

  "music_header_section": {
    "type": "panel",
    "size": [ "24%", "100%cm" ],
    "controls": [
      {
        "card_background": {
          "type": "image",
          "texture": "textures/ui/dialog/dialog_background",
          "layer": 1,
          "size": [ "100%", "100%sm + 2px" ]
        }
      },
      {
        "card_content": {
          "type": "stack_panel",
          "anchor_from": "center",
          "anchor_to": "center",
          "size": [ "100% - 2px", "100%c" ],
          "controls": [
            {
              "card_header_image": {
                "type": "panel",
                "size": [ "100%", "100%c + 4px" ],
                "controls": [
                  {
                    "card_image": {
                      "type": "image",
                      "texture": "textures/ui/img",
                      "layer": 4,
                      "size": [ "100%", "40%x" ]
                    }
                  }
                ]
              }
            },
            {
              "card_header_panel": {
                "type": "panel",
                "size": [ "100%", "100%c" ],
                "controls": [
                  {
                    "card_header_text": {
                      "type": "stack_panel",
                      "size": [ "100%", "100%c" ],
                      "controls": [
                        {
                          "card_title@music_common.label_common": {
                            "text": "$music_name",
                            "layer": 4,
                            "max_size": [ "100%", "default" ]
                          }
                        },
                        {
                          "padding": {
                            "type": "panel",
                            "size": [ "100%", 4 ]
                          }
                        },
                        {
                          "card_down_label": {
                            "type": "stack_panel",
                            "orientation": "horizontal",
                            "size": [ "100%", "100%c" ],
                            "controls": [
                              {
                                "card_creator_image": {
                                  "type": "image",
                                  "texture": "textures/ui/Black",
                                  "layer": 2,
                                  "alpha": 0.3,
                                  "size": [ "100%c + 4px", 12 ],
                                  "controls": [
                                    {
                                      "card_creator_text@music_common.label_common": {
                                        "text": "$music_creator",
                                        "layer": 4,
                                        "size": [ "default", "default" ]
                                      }
                                    }
                                  ]
                                }
                              },
                              {
                                "padding": {
                                  "type": "panel",
                                  "size": [ 4, 0 ]
                                }
                              },
                              {
                                "card_duration_image": {
                                  "type": "image",
                                  "texture": "textures/ui/Black",
                                  "layer": 2,
                                  "color": "yellow",
                                  "size": [ "100%c + 4px", 12 ],
                                  "controls": [
                                    {
                                      "card_duration_text@music_common.label_common": {
                                        "text": "$music_time",
                                        "layer": 4,
                                        "size": [ "default", "default" ]
                                      }
                                    }
                                  ]
                                }
                              }
                            ]
                          }
                        }
                      ]
                    }
                  }
                ]
              }
            },
            {
              "card_bottom_panel": {
                "type": "image",
                "texture": "textures/ui/dialog/dialog_background_footer",
                "layer": 2,
                "size": [ "100%", 30 ],
                "controls": [
                  {
                    "music_buttons_stack@music_common.music_buttons_stack": {
                      "layer": 2
                    }
                  }
                ]
              }
            }
          ]
        }
      }
    ]
  },

  "music_button_template@common.button": {
    "sound_name": "$music_button_sound_name",
    "sound_volume": "$music_button_sound_volume",
    "sound_pitch": 1.0,
    "$music_button_sound_name|default": "random.click",
    "button_mappings": [
      {
        "from_button_id": "button.menu_ok",
        "to_button_id": "$music_button_name",
        "mapping_type": "pressed"
      },
      {
        "from_button_id": "button.menu_select",
        "to_button_id": "$music_button_name",
        "mapping_type": "focused"
      }
    ],
    "controls": [
      {
        "default@$button_content": {}
      },
      {
        "hover@$button_content": {
          "color": [ 0.6, 0.6, 0.6 ]
        }
      },
      {
        "pressed@$button_content": {
          "color": [ 0.4, 0.4, 0.4 ],
          "offset": [ 0, 1 ]
        }
      }
    ]
  },

  "play_icon": {
    "type": "image",
    "texture": "textures/icons/play_icon",
    "layer": 2,
    "size": [ 16, 16 ]
  },

  "stop_icon": {
    "type": "image",
    "texture": "textures/icons/stop_icon",
    "layer": 2,
    "size": [ 16, 16 ]
  },

  "music_buttons_stack": {
    "type": "stack_panel",
    "orientation": "horizontal",
    "size": [ "100%", "100%cm" ],
    "controls": [
      {
        "paddingLeft": {
          "type": "panel",
          "size": [ 8, 0 ]
        }
      },
      {
        "play_button@music_common.music_button_template": {
          "$music_button_sound_volume": 1.0,
          "$music_button_name": "button.menu_play",
          "$button_content": "music_common.play_icon",
          "size": [ 20, 20 ]
        }
      },
      {
        "paddingMiddle": {
          "type": "panel",
          "size": [ "fill", 0 ]
        }
      },
      {
        "stop_button@music_common.music_button_template": {
          "$music_button_sound_volume": 0.0000000000000001,
          "$music_button_name": "button.menu_stop",
          "$button_content": "music_common.stop_icon",
          "size": [ 20, 20 ]
        }
      },
      {
        "paddingRight": {
          "type": "panel",
          "size": [ 8, 0 ]
        }
      }
    ]
  },

  "scrolling_content_panel": {
    "type": "stack_panel",
    "size": [ "100%", "100%c" ],
    "controls": [
      {
        "music_default_section@music_screen.music_default_pack": {
          "bindings": [
            {
              "binding_type": "view",
              "source_control_name": "music_default_section",
              "source_property_name": "#toggle_state",
              "target_property_name": "#visible"
            }
          ]
        }
      },
      {
        "music_custom_section@music_screen.music_custom_user": {
          "bindings": [
            {
              "binding_type": "view",
              "source_control_name": "music_custom_section",
              "source_property_name": "#toggle_state",
              "target_property_name": "#visible"
            }
          ]
        }
      }
    ]
  },

  "main_panel_content": {
    "type": "panel",
    "ttsSectionContainer": true,
    "size": [ "100%", "100% - 4px" ],
    "controls": [
      {
        "scrolling_panel@common.scrolling_panel": {
          "layer": 4,
          "$show_background": false,
          "$scrolling_content": "music_common.scrolling_content_panel",
          "$scroll_size": [ 4, "100% - 4px" ],
          "$scrolling_pane_size": [ "100%", "100%" ],
          "size": [ "100%", "100%" ]
        }
      }
    ]
  },

  "header_tab_common": {
    "type": "panel",
    "$text_color|default": [ 0.1, 0.1, 0.1 ],
    "size": [ "100%", "100%" ],
    "controls": [
      {
        "label_common": {
          "type": "label",
          "text": "$button_text",
          "anchor_from": "center",
          "anchor_to": "center",
          "layer": 2,
          "color": "$text_color",
          "size": [ "default", "default" ],
          "offset": [ 0, 0 ]
        }
      }
    ]
  },

  "header_tab_base@settings_common.section_toggle_base": {
    "$button_type_panel": "music_common.header_tab_common",
    "$toggle_name": "music_tab_toggle",

    /*"$default_texture": "textures/ui/white_button",
    "$hover_texture": "textures/ui/white_button_hover",
    "$pressed_texture": "textures/ui/white_button",
    "$pressed_no_hover_texture": "textures/ui/white_button_hover",*/

    "$default_border_visible": false,
    "$hover_border_visible": false
  },

  //---------------------------------------------------------------------------
  // Screen
  //---------------------------------------------------------------------------

  "music_screen_content": {
    "type": "stack_panel",
    "size": [ "100%", "100%" ],
    "controls": [
      {
        "top_bar_image": {
          "type": "image",
          "texture": "textures/ui/top_bar",
          "layer": 2,
          "size": [ "100%", 24 ],
          "controls": [
            {
              "title_text@music_common.label_common": {
                "text": "music.screen.title",
                "text_alignment": "center",
                "font_type": "MinecraftTen",
                "font_scale_factor": 1.05,
                "anchor_from": "center",
                "anchor_to": "center",
                "layer": 4,
                "color": [ 0.1, 0.1, 0.1 ],
                "size": [ "default", "default" ],
                "offset": [ 0, -2 ]
              }
            }
          ]
        }
      },
      {
        "padding0": {
          "type": "panel",
          "size": [ "100%", 4 ]
        }
      },
      {
        "header_tab_section": {
          "type": "panel",
          "size": [ "100%", "100%c" ],
          "controls": [
            {
              "stack_panel": {
                "type": "stack_panel",
                "orientation": "horizontal",
                "size": [ "100% - 24px", 28 ],
                "controls": [
                  {
                    "header_tab_0@music_common.header_tab_base": {
                      "$toggle_group_forced_index": 0,
                      "$toggle_view_binding_name": "music_default_section",
                      "$button_text": "music.tabSection.default",
                      "size": [ "50% - 4px", "100%"]
                    }
                  },
                  {
                    "padding_middle": {
                      "type": "panel",
                      "size": [ "fill", 0 ]
                    }
                  },
                  {
                    "header_tab_1@music_common.header_tab_base": {
                      "$toggle_group_forced_index": 1,
                      "$toggle_view_binding_name": "music_custom_section",
                      "$button_text": "music.tabSection.custom",
                      "size": [ "50% - 4px", "100%"]
                    }
                  }
                ]
              }
            }
          ]
        }
      },
      {
        "padding1": {
          "type": "panel",
          "size": [ "100%", 4 ]
        }
      },
      {
        "main_panel_content": {
          "type": "panel",
          "size": [ "100%", "fill" ],
          "controls": [
            {
              "main_panel_content@music_common.main_panel_content": {
                "size": [ "100% - 24px", "100% - 2px" ]
              }
            }
          ]
        }
      }
    ]
  },

  "music_button_image": {
    "type": "image",
    "texture": "$button_image",
    "layer": 1,
    "size": [ "100%", "100%" ]
  },

  "menu_open_button@common.button": {
    "anchor_from": "top_left",
    "anchor_to": "top_left",
    "$pressed_button_name": "button.menu_buy_game",
    "$button_text": "M",
    "size": [ 20, 20 ],
    "offset": [ 2, 2 ],
    "controls": [
      {
        "default@music_common.music_button_image": {
          "$button_image": "textures/ui/buttons/default_img"
        }
      },
      {
        "hover@music_common.music_button_image": {
          "$button_image": "textures/ui/buttons/hover_img"
        }
      },
      {
        "pressed@music_common.music_button_image": {
          "$button_image": "textures/ui/buttons/pressed_img"
        }
      }
    ]
  }
}